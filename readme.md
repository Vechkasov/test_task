## Запуск инфраструктуры
Для запуска необходима команда `docker compose up [-d]`

В случае возникновения ошибки `jupyter-1 'Kernel does not exist` необходимо выполнить следующие команды:
```bash
# Остановка всех контейнеров
docker-compose down

# Перезапуск
docker-compose up -d
```

## Инфраструктура
Инструменты запущены по следующим портам для внешнего использования:
- **Airflow** - 8080:8080 (admin, admin);
- **Jupyter** - 8888 (без аутентификации);
- **PostgreSQL** - 5444 (airflow).

Для подключения внутри инструментов контейнера к БД необходимо использовать порт 5432.

В файле `requirements.txt` описаны `python`-пакеты, которые устанавливаются на все инструменты, для работы спарка на эти инструменты так же скачивается `spark-jars` для PostgreSQL.

Все настройки можно изменять при помощи файла `.env`, откуда `docker-compose.yml` берет основные переменные. `Python`-пакеты так же можно модифицировать, но, возможно, придется бороться с отсутствием совместимости у пакетов.

## Работа с инфраструктурой
Датасеты расположены в папке `data` и доступны в `airflow` и `jupyter`.
Для выкладки дагов и спарк-скриптов для них необходимо использовать директорию `dags`. 
После добавления файлов они в течение пары минут появятся в интерфейсе [airflow ui](http://localhost:8080/).

По ссылке [jupyter](http://localhost:8888/) можно тестировать `pyspark` скрипты.

Для всех инструментов есть свои примеры.
При необходимости можно модифицировать `init-scripts` - список скриптов, которые выполняются в БД при запуске.

## Описание задания
В папке `data` есть `csv` файлы с разделением по годам (raw_2020, ..., raw_2023). Это официальные данные по заболевшим COVID-19, поля следующие:
- `Country`, `Region` - страна, регион;
- `Province`, `State` - провинция, штат;
- столбцы с количество заболевших по датам и по дням. 

Данные по столбцам идут нарастающим итогом

Задача:
1. Необходимо загрузить файлы (данные разбиты по годам) (слой `RAW`)
2. Необходимо транспонировать дата сет. Даты должны быть записаны из столбцов в строки (слой `STAGE`) и записать в одну витрину
3. На слое `MART` сделать витрину (количество смертей по месяцам и годам)